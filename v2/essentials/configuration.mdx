---
title: 'Configuration'
icon: 'gear'
---

## Overriding Models

The Custom Fields plugin allows you to replace the default models with your own custom implementations.

### Registering Custom Models

Register your custom models in a service provider:

```php
use Relaticle\CustomFields\CustomFields;

class AppServiceProvider extends ServiceProvider
{
    public function boot()
    {
        // Register your custom models
        CustomFields::useCustomFieldModel(YourCustomField::class);
        CustomFields::useValueModel(YourCustomFieldValue::class);
        CustomFields::useOptionModel(YourCustomFieldOption::class);
        CustomFields::useSectionModel(YourCustomFieldSection::class);
    }
}
```

### Creating Custom Models

Extend the base models:

```php
namespace App\Models;

use Relaticle\CustomFields\Models\CustomField as BaseCustomField;

class YourCustomField extends BaseCustomField
{
    // Add custom functionality
    public function someCustomMethod()
    {
        // Your implementation
    }
    
    // Override methods if needed
    public function getNameAttribute($value)
    {
        return ucfirst($value);
    }
}
```

### Accessing Custom Models

Use the helper methods:

```php
// Get model class names
$customFieldClass = CustomFields::customFieldModel();

// Create new instances
$customField = CustomFields::newCustomFieldModel();
$value = CustomFields::newValueModel();
$option = CustomFields::newOptionModel();
$section = CustomFields::newSectionModel();
```

## Configuration File

The configuration file (`config/custom-fields.php`) allows you to customize various aspects of the plugin. Custom Fields v2 introduces a cleaner, more organized configuration structure.

### Entity Configuration

The most important section configures which models can use custom fields:

```php
'entity_configuration' => EntityConfiguration::configure()
    ->discover(app_path('Models'))  // Auto-discover models
    ->cache(true)                   // Cache for performance
    ->models([
        // Explicit entity configurations with full control
        EntityModel::for(\App\Models\Post::class)
            ->label('Blog Post', 'Blog Posts')
            ->icon('heroicon-o-document-text')
            ->searchIn(['title', 'content'])
            ->features([EntityFeature::CUSTOM_FIELDS, EntityFeature::LOOKUP_SOURCE])
            ->priority(10),
    ]),
```

### Features Configuration

Control which features are enabled:

```php
'features' => [
    'conditional_visibility' => true,  // Show/hide fields based on conditions
    'encryption' => true,              // Enable field encryption
    'select_option_colors' => true,    // Color options for select fields
],
```

### Field Types Configuration

Configure which field types are available and their behavior:

```php
'field_types' => [
    'enabled' => [
        // Empty array = all field types enabled (default)
        // Specify field type keys to allow only those types:
        // 'text', 'textarea', 'select', 'checkbox', 'number', 'date'
    ],
    'disabled' => [
        // Specify field type keys to disable:
        // 'rich_editor', 'markdown_editor'
    ],
    'configuration' => [
        'date' => [
            'native' => false,
            'format' => 'Y-m-d',
            'display_format' => null,
        ],
        'date_time' => [
            'native' => false,
            'format' => 'Y-m-d H:i:s',
            'display_format' => null,
        ],
    ],
],
```

### Resource Configuration

Customize how custom fields appear in Filament tables:

```php
'resource' => [
    'table' => [
        'columns' => true,              // Show custom field columns
        'columns_toggleable' => true,   // Allow users to toggle columns
        'filters' => true,              // Show custom field filters
    ],
],
```

### Management Interface

Configure the custom fields management page:

```php
'management' => [
    'enabled' => true,              // Enable the management interface
    'slug' => 'custom-fields',      // URL slug
    'navigation_sort' => -1,        // Navigation sort order
    'navigation_group' => true,     // Group in navigation
    'cluster' => null,              // Optional cluster assignment
],
```

### Multi-Tenancy

Enable tenant isolation:

```php
'tenant_aware' => false,  // Set to true to enable multi-tenancy
```

### Database Configuration

Customize table and column names:

```php
'database' => [
    'migrations_path' => database_path('custom-fields'),
    'table_names' => [
        'custom_field_sections' => 'custom_field_sections',
        'custom_fields' => 'custom_fields',
        'custom_field_values' => 'custom_field_values',
        'custom_field_options' => 'custom_field_options',
    ],
    'column_names' => [
        'tenant_foreign_key' => 'tenant_id',
    ],
],
```

## Configuration Examples

### Restricting Field Types

Limit available field types in production:

```php
'field_types' => [
    'enabled' => [
        'text',
        'textarea', 
        'number',
        'select',
        'checkbox',
        'date',
    ],
    // Disable rich content editors in restricted environments
    'disabled' => [
        'rich_editor',
        'markdown_editor',
    ],
],
```

### Multi-Entity Configuration

Configure multiple entities with different capabilities:

```php
'entity_configuration' => EntityConfiguration::configure()
    ->discover(app_path('Models'))
    ->cache(env('CUSTOM_FIELDS_CACHE', true))
    ->models([
        // Blog posts with full features
        EntityModel::for(\App\Models\Post::class)
            ->label('Blog Post', 'Blog Posts')
            ->icon('heroicon-o-document-text')
            ->searchIn(['title', 'content', 'excerpt'])
            ->features([EntityFeature::CUSTOM_FIELDS, EntityFeature::LOOKUP_SOURCE])
            ->priority(10),
            
        // Products with custom fields only
        EntityModel::for(\App\Models\Product::class)
            ->label('Product', 'Products')
            ->icon('heroicon-o-cube')
            ->searchIn(['name', 'description', 'sku'])
            ->features([EntityFeature::CUSTOM_FIELDS])
            ->priority(20),
            
        // Users as lookup source only (no custom fields)
        EntityModel::for(\App\Models\User::class)
            ->label('User', 'Users')
            ->icon('heroicon-o-user')
            ->searchIn(['name', 'email'])
            ->features([EntityFeature::LOOKUP_SOURCE])
            ->priority(30),
    ]),
```

### Development vs Production

Use environment variables for flexible configuration:

```php
'features' => [
    'conditional_visibility' => env('CUSTOM_FIELDS_CONDITIONAL_VISIBILITY', true),
    'encryption' => env('CUSTOM_FIELDS_ENCRYPTION', true),
    'select_option_colors' => env('CUSTOM_FIELDS_OPTION_COLORS', true),
],

'entity_configuration' => EntityConfiguration::configure()
    ->discover(app_path('Models'))
    ->cache(env('CUSTOM_FIELDS_CACHE_ENTITIES', !app()->isLocal()))
    ->models([
        // Configuration here
    ]),
```

## Best Practices

### Performance Optimization

1. **Enable Entity Caching**: Always enable caching in production:
   ```php
   ->cache(env('CUSTOM_FIELDS_CACHE_ENTITIES', true))
   ```

2. **Restrict Field Types**: Only enable field types you actually use:
   ```php
   'field_types' => [
       'enabled' => ['text', 'number', 'select', 'date'],
   ],
   ```

3. **Configure Discovery Paths**: Limit discovery to specific directories:
   ```php
   ->discover([
       app_path('Models'),
       // Don't include vendor or other large directories
   ])
   ```

### Security Considerations

1. **Disable Unused Features**: Turn off features you don't need:
   ```php
   'features' => [
       'encryption' => true,              // Keep for sensitive data
       'conditional_visibility' => false, // Disable if not used
   ],
   ```

2. **Restrict Field Types**: Disable potentially unsafe field types:
   ```php
   'field_types' => [
       'disabled' => [
           'rich_editor',     // Disable if XSS is a concern
           'markdown_editor', // Disable if not needed
       ],
   ],
   ```

3. **Multi-Tenancy**: Always enable in multi-tenant applications:
   ```php
   'tenant_aware' => true,
   ```